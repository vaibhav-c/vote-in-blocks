{"version":3,"sources":["tesseract/tesseract-ocr.js"],"names":["$","document","ready","inputs","querySelectorAll","Array","prototype","forEach","call","input","label","nextElementSibling","labelVal","innerHTML","addEventListener","e","fileName","files","length","getAttribute","replace","target","value","split","pop","querySelector","reader","FileReader","onload","dataURL","result","attr","addClass","file","readAsDataURL","startRecognize","removeClass","empty","classList","add","remove","click","img","getElementById","recognizeFile","progressUpdate","packet","log","firstChild","status","progress","line","createElement","className","appendChild","createTextNode","max","pre","data","text","insertBefore","corePath","window","navigator","userAgent","indexOf","worker","Tesseract","TesseractWorker","recognize","val","console","info","then"],"mappings":"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","file":"tesseract-ocr.5f513007.js","sourceRoot":"..\\src","sourcesContent":["$( document ).ready(function() {\n\tvar inputs = document.querySelectorAll( '.inputfile' );\n\tArray.prototype.forEach.call( inputs, function( input )\n\t{\n\t\tvar label\t = input.nextElementSibling,\n\t\t\tlabelVal = label.innerHTML;\n\n\t\tinput.addEventListener( 'change', function( e )\n\t\t{\n\t\t\tvar fileName = '';\n\t\t\tif( this.files && this.files.length > 1 )\n\t\t\t\tfileName = ( this.getAttribute( 'data-multiple-caption' ) || '' ).replace( '{count}', this.files.length );\n\t\t\telse\n\t\t\t\tfileName = e.target.value.split( '\\\\' ).pop();\n\n\t\t\tif( fileName ){\n\t\t\t\tlabel.querySelector( 'span' ).innerHTML = fileName;\n\n\t\t\t\tlet reader = new FileReader();\n\t\t\t\treader.onload = function () {\n\t\t\t\t\tlet dataURL = reader.result;\n\t\t\t\t\t$(\"#selected-image\").attr(\"src\", dataURL);\n\t\t\t\t\t$(\"#selected-image\").addClass(\"col-12\");\n\t\t\t\t}\n\t\t\t\tlet file = this.files[0];\n\t\t\t\treader.readAsDataURL(file);\n\t\t\t\tstartRecognize(file);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tlabel.innerHTML = labelVal;\n\t\t\t\t$(\"#selected-image\").attr(\"src\", '');\n\t\t\t\t$(\"#selected-image\").removeClass(\"col-12\");\n\t\t\t\t$(\"#arrow-right\").addClass(\"fa-arrow-right\");\n\t\t\t\t$(\"#arrow-right\").removeClass(\"fa-check\");\n\t\t\t\t$(\"#arrow-right\").removeClass(\"fa-spinner fa-spin\");\n\t\t\t\t$(\"#arrow-down\").addClass(\"fa-arrow-down\");\n\t\t\t\t$(\"#arrow-down\").removeClass(\"fa-check\");\n\t\t\t\t$(\"#arrow-down\").removeClass(\"fa-spinner fa-spin\");\n\t\t\t\t$(\"#log\").empty();\n\t\t\t}\n\t\t});\n\n\t\t// Firefox bug fix\n\t\tinput.addEventListener( 'focus', function(){ input.classList.add( 'has-focus' ); });\n\t\tinput.addEventListener( 'blur', function(){ input.classList.remove( 'has-focus' ); });\n\t});\n});\n\n$(\"#startLink\").click(function () {\n\tvar img = document.getElementById('selected-image');\n\tstartRecognize(img);\n});\n\nfunction startRecognize(img){\n\t$(\"#arrow-right\").removeClass(\"fa-arrow-right\");\n\t$(\"#arrow-right\").addClass(\"fa-spinner fa-spin\");\n\t$(\"#arrow-down\").removeClass(\"fa-arrow-down\");\n\t$(\"#arrow-down\").addClass(\"fa-spinner fa-spin\");\n\trecognizeFile(img);\n}\n\nfunction progressUpdate(packet){\n\tvar log = document.getElementById('log');\n\n\tif(log.firstChild && log.firstChild.status === packet.status){\n\t\tif('progress' in packet){\n\t\t\tvar progress = log.firstChild.querySelector('progress')\n\t\t\tprogress.value = packet.progress\n\t\t}\n\t}else{\n\t\tvar line = document.createElement('div');\n\t\tline.status = packet.status;\n\t\tvar status = document.createElement('div')\n\t\tstatus.className = 'status'\n\t\tstatus.appendChild(document.createTextNode(packet.status))\n\t\tline.appendChild(status)\n\n\t\tif('progress' in packet){\n\t\t\tvar progress = document.createElement('progress')\n\t\t\tprogress.value = packet.progress\n\t\t\tprogress.max = 1\n\t\t\tline.appendChild(progress)\n\t\t}\n\n\n\t\tif(packet.status == 'done'){\n\t\t\tlog.innerHTML = ''\n\t\t\tvar pre = document.createElement('pre')\n\t\t\tpre.appendChild(document.createTextNode(packet.data.text.replace(/\\n\\s*\\n/g, '\\n')))\n\t\t\tline.innerHTML = ''\n\t\t\tline.appendChild(pre)\n\t\t\t$(\".fas\").removeClass('fa-spinner fa-spin')\n\t\t\t$(\".fas\").addClass('fa-check')\n\t\t}\n\n\t\tlog.insertBefore(line, log.firstChild)\n\t}\n}\n\nfunction recognizeFile(file){\n\t$(\"#log\").empty();\n  \tconst corePath = window.navigator.userAgent.indexOf(\"Edge\") > -1\n    ? 'js/tesseract-core.asm.js'\n    : 'js/tesseract-core.wasm.js';\n\n\n\tconst worker = new Tesseract.TesseractWorker({\n\t\tcorePath,\n\t});\n\n\tworker.recognize(file,\n\t\t$(\"#langsel\").val()\n\t)\n\t\t.progress(function(packet){\n\t\t\tconsole.info(packet)\n\t\t\tprogressUpdate(packet)\n\n\t\t})\n\t\t.then(function(data){\n\t\t\tconsole.log(data)\n\t\t\tprogressUpdate({ status: 'done', data: data })\n\t\t})\n}"]}